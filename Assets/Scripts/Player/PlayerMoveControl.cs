using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[RequireComponent(typeof(Rigidbody2D))]
public class PlayerMoveControl : MonoBehaviour
{

    #region Доступные в редакторе поля

    [SerializeField]                                            //Отрисовать в редакторе
    [Range(1, 10)]                                               //Сделать ползунок
    [Tooltip("Скорость перемещения звездолёта игрока")]         //Сделать всплывающую подсказку
    private float speed = 1;


    [SerializeField]
    [Tooltip("Включить режим отладки скрипта для этого объекта. Будет отображаться вспомогательная отрисовка в окне сцены, а в консоль будут добаляться логи")]
    private bool debug = false;

    #endregion

    #region недоступные в редакторе публичные поля

    [HideInInspector]
    public Vector2 moveVector;

    #endregion

    #region приватные поля

    private Rigidbody2D rb2D;
    private Transform myTransform;
    private float x, y;

    #endregion


    #region Обработка событий Unity
    void Start()
    {
        rb2D = GetComponent<Rigidbody2D>();
        myTransform = transform;
        moveVector = Vector2.zero;
    }

    void Update()
    {
        x = Input.GetAxis("Horizontal");
        y = Input.GetAxis("Vertical");

        if(x != 0 || y != 0)
        {
            moveVector = new Vector2(x,y);
            moveVector.Normalize();

            if (debug)
            {
                Debug.Log("Текуший вектор движения игрока: " + moveVector + ". Его длина: " + moveVector.magnitude);
            }


            moveVector *= speed;
            moveVector *= Time.deltaTime;

            rb2D.position += moveVector;
//            myTransform.up = moveVector;
            myTransform.up = Vector3.Lerp(myTransform.up, moveVector, 0.9f);
        }
    }
    #endregion

    #region Вспомогательные приватные методы



    #endregion
}
